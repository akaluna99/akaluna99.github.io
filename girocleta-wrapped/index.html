<!DOCTYPE html>
<html lang="ca">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="./favicon.png">

    <script src="distancies.js"></script>
    <script src="https://unpkg.com/scrollreveal"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inria+Sans:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="style.css">

    <title>2025 Girocleta Wrapped</title>

    <meta name="description" content="Descobreix les teves estadístiques amb girocleta d'aquest any">

    <!-- Facebook Meta Tags -->
    <meta property="og:title" content="2025 Girocleta Wrapped">
    <meta property="og:description" content="Descobreix les teves estadístiques amb girocleta d'aquest any">
    <meta property="og:image" content="https://cataluna.cat/girocleta-wrapped/imgs/og-card.png">
    <meta property="og:url" content="https://cataluna.cat/girocleta-wrapped/">
    <meta property="og:site_name" content="2025 Girocleta Wrapped">
    <meta property="og:type" content="article">

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="2025 Girocleta Wrapped">
    <meta name="twitter:description" content="Descobreix les teves estadístiques amb girocleta d'aquest any">
    <meta name="twitter:image" content="https://cataluna.cat/girocleta-wrapped/imgs/og-card.png">
    <!-- Meta Tags Generated via https://toolsaday.com -->
    <meta name="keywords"
        content="girona, girocleta wrapped 2025, girocleta luna, girocleta estadistiques, girocleta resum">
    <meta name="author" content="Luna Moreno">

    <!-- UMAMI -->
    <script defer src="https://cloud.umami.is/script.js"
        data-website-id="d98e84d1-2764-48aa-838a-faff60764f6b"></script>


</head>
<div style="display:none;">
    <img id="girocleta-dibuix" src="girocleta-icona.png">
</div>
<script>
    function generateTwitterButton(){

        window.twttr = (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0],
            t = window.twttr || {};
            if (d.getElementById(id)) return t;
            js = d.createElement(s);
            js.id = id;
            js.src = "https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js, fjs);
            
            t._e = [];
            t.ready = function (f) {
                t._e.push(f);
            };
            
            return t;
        }(document, "script", "twitter-wjs"));
    }
</script>
<script>
    function drawCanvas(pId = 'myCanvasV', pNom = 'Luna', pHores = 0, pKm = 0, pKms = 0, pViatges = 0) {
        const canvas = document.getElementById(pId);
        const ctx = canvas.getContext('2d');
        const image = document.getElementById("girocleta-dibuix");

        //image.setAttribute('crossorigin', 'anonymous'); // works for me

        // Establecer el fondo
        ctx.fillStyle = '#4da558'; // Color de fondo
        ctx.fillRect(0, 0, canvas.width, canvas.height); // Dibujar el rectángulo de fondo

        // Create linear gradient
        const grad = ctx.createLinearGradient(0, 0, canvas.width, 2000);
        grad.addColorStop(0, "#030201");
        grad.addColorStop(0.8, "#4da558");
        grad.addColorStop(1, "#f1d600");

        // Fill rectangle with gradient
        ctx.fillStyle = grad;
        ctx.fillRect(0, 0, canvas.width, canvas.height);


        // Dibujar el título
        ctx.textAlign = 'center';
        ctx.fillStyle = '#FFFFFF'; // Color del texto (blanco)
        ctx.font = '90px Inria Sans';
        ctx.fillText(pNom, canvas.width / 2, 160 * 2);
        ctx.font = 'bold 100px Rubik';
        //ctx.font = 'bold 300px Rubik';
        ctx.fillText('2025', canvas.width / 2, 160);
        //ctx.fillText('2024', canvas.width/2, 300);
        ctx.font = 'bold 80px Rubik';
        //ctx.font = 'bold 150px Rubik';
        ctx.fillText('Girocleta Wrapped', canvas.width / 2, 160 + 80);
        //ctx.fillText('Girocleta Wrapped', canvas.width/2, canvas.height/2);

        var hGrid = canvas.height / 10;
        var hMargin = 100;
        ctx.textAlign = 'left';
        ctx.font = '90px Inria Sans';
        ctx.fillText(`${pHores.toFixed(0)}h d\'ús`, hMargin, hGrid * 3)
        ctx.textAlign = 'right';
        ctx.font = '70px Inria Sans';
        ctx.fillText(`${pKm.toFixed(2)}km recorreguts`, canvas.width - hMargin, hGrid * 4)
        ctx.textAlign = 'left';
        ctx.font = '60px Inria Sans';
        ctx.fillText(`${pKms.toFixed(0)}km/h velocitat mitjana`, hMargin, hGrid * 5)
        ctx.textAlign = 'center';
        ctx.font = 'bold 120px Inria Sans';
        ctx.fillText(`${pViatges} viatges`, canvas.width / 2, hGrid * 6 + 50)
        ctx.drawImage(image, canvas.width / 2 - image.width * 1.5 / 2, hGrid * 7 - image.height * 1.5 / 5, image.width * 1.5, image.height * 1.5);
        // Dibujar el #
        ctx.font = '43px "Rubik"';
        ctx.textAlign = 'left';
        ctx.fillText('cataluna.cat/girocleta', hMargin - 50, canvas.height - 100); // Posición en la parte inferior derecha
        // Dibujar el @
        ctx.textAlign = 'right';
        ctx.fillText('#girocletaWrapped2025', canvas.width - hMargin + 50, canvas.height - 100); // Posición en la parte inferior izquierda

        var imgSrc = canvas.toDataURL();
        document.getElementById(pId + 'Img').src = imgSrc
    }   
</script>

<body onload="document.getElementById('0').scrollIntoView();" style="overflow: hidden;">
    <script>
        function indexOfMax(arr) {
            let maxIndex = 0;
            for (let i = 1; i < arr.length; i++) {
                if (arr[maxIndex] == undefined) {
                    maxIndex = i;
                }
                if (parseInt(arr[i]) > parseInt(arr[maxIndex])) {
                    maxIndex = i;
                }
            }
            return maxIndex;
        }

    </script>
    <header class="headline" id="0">
        <h1>2025 Girocleta Wrapped</h1>
        <h2>Resum del teu any amb Girocleta</h2>
        <label for="username">Introdueix el teu nom:</label>
        <input type="text" id="username" name="your_name" required minlength="1" maxlength="120"
            placeholder="El teu nom" />
        <div id="drop-area">
            <input type="file" id="fileInput" accept=".html, .htm, .mht" style="display:none;">
            <label id='drop-label' for="fileInput">Arrossega aquí o clica per seleccionar el teu fitxer</label>
        </div>
        <p>
            Si no saps com aconseguir el fitxer, revisa <a href="./tutorial.html" target="_blank">aquí</a>
        </p>
        <script>
            let dropArea = document.getElementById('drop-area');
            let dropLabel = document.getElementById('drop-label');
            let fileInput = document.getElementById('fileInput');
            // Evitar que el navegador obri el fitxer per defecte
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, preventDefaults, false);
                document.body.addEventListener(eventName, preventDefaults, false);
            });

            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            // Afegir classes per a l'efecte visual
            ['dragenter', 'dragover'].forEach(eventName => {
                dropArea.addEventListener(eventName, () => dropArea.classList.add('hover'), false);
            });

            ['dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, () => dropArea.classList.remove('hover'), false);
            });

            // Manejar el fitxer deixat anar
            dropArea.addEventListener('drop', handleDrop, false);

            function handleDrop(e) {
                let dt = e.dataTransfer;
                let files = dt.files;

                handleFiles(files);
            }

            // Funció per manejar els fitxers seleccionats
            function handleFiles(files) {
                if (files.length > 0) {
                    // Carregar el fitxer a l'input
                    fileInput.files = files;
                    dropLabel.textContent = "Fitxer carregat: " + files[0].name;
                }
            }

            // Permetre seleccionar fitxers amb clic
            dropArea.addEventListener('click', () => {
                fileInput.click();
            });

            // Manejar la selecció de fitxers
            fileInput.addEventListener('change', (e) => {
                handleFiles(e.target.files);
            });
        </script>
        <div>
            <!--
            <p>Introdueix el fitxer, si no saps com aconseguir-lo mira aqui</p>
            <input type="file" id="fileInput" accept=".html">
            -->
        </div>
        <button style="cursor: pointer;" id="loadButton">Carregar Taula</button>
    </header>
    <script>
        document.getElementById('loadButton').addEventListener('click', function () {
            const fileInput = document.getElementById('fileInput');
            const user_name = document.getElementById('username').value;
            const file = fileInput.files[0];

            if (file && user_name) {
                const reader = new FileReader();
                reader.onload = function (event) {
                    const content = event.target.result;
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(content, 'text/html');

                    // Trobar la taula
                    const table = doc.querySelector('table.ib_grid');
                    if (table) {
                        // Trobar el tbody i tots els tr dins d'ell
                        const tbody = table.querySelector('tbody');
                        const rows = tbody ? tbody.querySelectorAll('tr') : [];

                        // Crear una estructura per emmagatzemar els continguts dels tr
                        const rowsData = Array.from(rows).map(row => {

                            return Array.from(row.children).map(cell => cell.innerHTML);
                        });

                        // 0 DATA I HORA, 1 ESTACIO ORIGEN, 2 DATA I HORA, 3 ESTACIO DESTI, 4 BICICLETA
                        rowsData.shift() // Per eliminar la basura
                        var fullDictionary = [];
                        var diccionariEstacions = {}
                        var histogrames = {
                            'bicicletes': [],
                            'estacions': [],
                            'estacionsOrigen': [],
                            'estacionsDesti': [],
                            'mesos': [0,0,0,0,0,0,0,0,0,0,0,0]
                        }
                        var viatgeMesLlarg = {
                            'duracio': 0,
                            'distancia': 0
                        }
                        var viatgeMesCurt = {
                            'duracio': 0,
                            'distancia': 0
                        }
                        var totalHores = 0
                        var totalBicicletes = 0
                        var primerViatge = null;
                        var ultimViatge = null;
                        var distanciaTotal = 0;
                        var velocitatMitjana = null;
                        var contadorDies = {}
                        for (var dataRow of rowsData) {
                            // Formategem la maldita data
                            var dataRecollida = dataRow[0]
                            var parts = dataRecollida.split("/");
                            var hourMinSec = parts[2].split(' ')[1].split(':');
                            var dataRecollida = new Date(parseInt(parts[2], 10),
                                parseInt(parts[1], 10) - 1,
                                parseInt(parts[0], 10),
                                parseInt(hourMinSec[0]),
                                parseInt(hourMinSec[1]),
                                parseInt(hourMinSec[2]));

                            // Same pero amb la data de deixada
                            var dataDesti = dataRow[2]
                            var parts = dataDesti.split("/");
                            var hourMinSec = parts[2].split(' ')[1].split(':');
                            var dataDesti = new Date(parseInt(parts[2], 10),
                                parseInt(parts[1], 10) - 1,
                                parseInt(parts[0], 10),
                                parseInt(hourMinSec[0]),
                                parseInt(hourMinSec[1]),
                                parseInt(hourMinSec[2]));

                            var sessionTime = (dataDesti - dataRecollida) / 1000 // Conversio a segons
                            totalHores += sessionTime
                            // Sumem als histogrames
                            var jsonData = {
                                'inici': dataRecollida,
                                'fi': dataDesti,
                                'duracio': sessionTime,
                                'origen': dataRow[1],
                                'desti': dataRow[3],
                                'bicicleta': dataRow[4]
                            }
                            var estIni = parseInt(jsonData.origen.substring(0, 2))
                            var estFin = parseInt(jsonData.desti.substring(0, 2))
                            var distanciaRecorreguda = master_distancies[estIni][estFin];
                            if (isNaN(distanciaRecorreguda)) {
                                distanciaRecorreguda = 0;
                            } else {
                                if (velocitatMitjana) {
                                    velocitatMitjana = (velocitatMitjana + (distanciaRecorreguda / sessionTime)) / 2
                                } else {
                                    velocitatMitjana = distanciaRecorreguda / sessionTime
                                }
                            }
                            distanciaTotal += distanciaRecorreguda;
                            jsonData['distancia'] = distanciaRecorreguda;

                            if (isNaN(estIni) || isNaN(estFin)) {
                                continue;
                            }
                            // Contem dies
                            var dataDia = dataRecollida.toISOString().split('T')[0]
                            contadorDies[dataDia] = 1;
                            // Amb aixo la bici
                            var nBici = parseInt(jsonData.bicicleta.slice(1));
                            if (histogrames.bicicletes[nBici]) {
                                histogrames.bicicletes[nBici] += 1
                            } else {
                                histogrames.bicicletes[nBici] = 1
                                totalBicicletes += 1;
                            }


                            diccionariEstacions[estIni] = jsonData.origen;
                            diccionariEstacions[estFin] = jsonData.desti;

                            if (histogrames.estacions[estIni]) {
                                histogrames.estacions[estIni] += 1
                            } else {
                                histogrames.estacions[estIni] = 1
                            }
                            if (histogrames.estacionsOrigen[estIni]) {
                                histogrames.estacionsOrigen[estIni] += 1
                            } else {
                                histogrames.estacionsOrigen[estIni] = 1
                            }


                            if (histogrames.estacions[estFin]) {
                                histogrames.estacions[estFin] += 1
                            } else {
                                histogrames.estacions[estFin] = 1
                            }
                            if (histogrames.estacionsDesti[estFin]) {
                                histogrames.estacionsDesti[estFin] += 1
                            } else {
                                histogrames.estacionsDesti[estFin] = 1
                            }
                            if (viatgeMesLlarg.duracio == 0 || (sessionTime > 30 && distanciaRecorreguda / sessionTime < 7 && distanciaRecorreguda / sessionTime > viatgeMesLlarg.distancia / viatgeMesLlarg.duracio)) {
                                viatgeMesLlarg = jsonData;
                            }
                            if (viatgeMesCurt.duracio == 0 || (sessionTime > 30 && distanciaRecorreguda / sessionTime < 7 && distanciaRecorreguda / sessionTime < viatgeMesCurt.distancia / viatgeMesCurt.duracio)) {
                                viatgeMesCurt = jsonData;
                            }

                            fullDictionary.push(jsonData)
                            if (!primerViatge) {
                                primerViatge = jsonData
                            }
                            ultimViatge = jsonData
                            //return;
                            //Calendari Mesos
                            histogrames.mesos[dataDesti.getMonth()] += 1
                        }
                        nom_usuari.innerHTML = username.value
                        nom_usuari_2.innerHTML = username.value
                        viatges_totals.innerHTML = fullDictionary.length

                        // Grafic
                        var grafic_format_month = ''
                        for (var month in histogrames.mesos) {
                            if (grafic_format_month != ''){
                                grafic_format_month += `${month}%2C`
                            }
                            else {
                                grafic_format_month += `${month}`
                            }
                            // 666%2C666%2C666%2C666%2C666%2C666%2C666%2C666%2C666%2C666%2C666%2C666
                        }
                        grafic_girocleta.src = `https://quickchart.io/chart?v=4&c=%7B%0A%20%20type%3A%20%27bar%27%2C%0A%20%20data%3A%20%7B%0A%20%20%20%20labels%3A%20%5B%27gener%27%2C%20%0A%27febrer%27%2C%0A%27mar%C3%A7%27%2C%0A%27abril%27%2C%0A%27maig%27%2C%0A%27juny%27%2C%0A%27juliol%27%2C%20%0A%27agost%27%2C%0A%27setembre%27%2C%20%0A%27octubre%27%2C%0A%27novembre%27%2C%0A%27desembre%27%5D%2C%0A%20%20%20%20datasets%3A%20%5B%7B%0A%20%20%20%20%20%20label%3A%20%27%C3%9As%20per%20mes%27%2C%0A%20%20%20%20%20%20data%3A%20%5B${grafic_format_month}%5D%2C%0A%20%20%20%20%20%20backgroundColor%3A%20getGradientFillHelper(%27vertical%27%2C%20%5B%27%23030201%27%2C%20%27%234da558%27%2C%20%27%23f1d600%27%5D)%2C%0A%20%20%20%20%7D%5D%0A%20%20%7D%0A%7D`

                        // Hores totals
                        var hrs = parseInt(Number(totalHores / 60 / 60));
                        var min = Math.round((Number(totalHores / 60 / 60) - hrs) * 60);
                        hores_totals.innerHTML = hrs
                        minuts_totals.innerHTML = min

                        // Més usada
                        var biciMaxIndex = indexOfMax(histogrames.bicicletes)
                        bicicleta_max.innerHTML = 'B' + String(biciMaxIndex)
                        bicicleta_max_usos.innerHTML = histogrames.bicicletes[biciMaxIndex];
                        bicicletes_usades.innerHTML = totalBicicletes

                        //Parada mes usada
                        var estMaxIndex = indexOfMax(histogrames.estacions)
                        parada_max.innerHTML = diccionariEstacions[estMaxIndex].slice(4)
                        parada_max_num.innerHTML = histogrames.estacions[estMaxIndex]

                        // Viatges min max
                        viatge_mes_llarg.innerHTML = ` el ${viatgeMesLlarg.inici.toLocaleDateString('ca', { month: 'long', day: 'numeric', })}, i vas viatjar des de 
                        <span>${viatgeMesLlarg.origen.slice(4)}</span> fins a <span>${viatgeMesLlarg.desti.slice(4)}</span>, <span>${(viatgeMesLlarg.distancia / 1000).toFixed(2)}</span>km en ${(viatgeMesLlarg.duracio / 60).toFixed(2)} minuts`
                        velocitat_max.innerHTML = ((viatgeMesLlarg.distancia / viatgeMesLlarg.duracio) * 3.6).toFixed(2)
                        viatge_mes_curt.innerHTML = `el ${viatgeMesCurt.inici.toLocaleDateString('ca', { month: 'long', day: 'numeric', })}, i vas viatjar des de 
                        <span>${viatgeMesCurt.origen.slice(4)}</span> fins a <span>${viatgeMesCurt.desti.slice(4)}</span> a una velocitat de <span>${((viatgeMesCurt.distancia / viatgeMesCurt.duracio) * 3.6).toFixed(2)}km/h</span>`;

                        // Primera y ultima
                        primer_viatge.innerHTML = `${primerViatge.inici.toLocaleDateString('ca', { weekday: 'long', month: 'long', day: 'numeric', })}`
                        ultim_viatge.innerHTML = `${ultimViatge.inici.toLocaleDateString('ca', { weekday: 'long', month: 'long', day: 'numeric', })}`
                        // Distancia total
                        distancia_total.innerHTML = (distanciaTotal / 1000).toFixed(2)

                        // Velocitat
                        velocitat_mitjana.innerHTML = (velocitatMitjana * 3.6).toFixed(2)

                        // Money
                        var diesUs = Object.keys(contadorDies).length
                        dies_us.innerHTML = diesUs
                        valor_total.innerHTML = diesUs * 2;
                        if (diesUs == 15) { // Larguero
                            text_amortitzat.innerHTML = 'Increïble! Has fet us <span>15</span> dies, cosa que fa que haguessis gastat el mateix si cada dia compressis un abonament diari. '
                        } else if (diesUs * 2 < 30) { // No Amortitzat
                            text_amortitzat.innerHTML = `Per desgracia t'han faltat <span>${15 - diesUs}</span> dies per amortitzar l'abonament. Has perdut <span>${(15 - diesUs) * 2}</span> euros, pero encara els pots recuperar abans de que acabi l'any, anims!`
                        } else if (diesUs * 2 > 30) { // Amortitzat
                            text_amortitzat.innerHTML = `Enhorabona! En total t'has estalviat <span>${(diesUs * 2) - 30}</span>€ amb l'abonament! En que tens pensat gastar-los?`;
                        }
                        document.getElementById('1').scrollIntoView()
                        document.body.style.overflow = 'scroll'

                        ScrollReveal().reveal('section', { duration: 2000, reset: true });
                        ScrollReveal().reveal('span', { duration: 1000, delay: 500, interval: 500, scale: 0.85, reset: true });
                        
                        document.getElementById("twitter-button").setAttribute("data-text", 
                        `El meu resum del 2025 amb Girocleta:\n\n- He fet ${fullDictionary.length} viatges\n- He recorregut ${(distanciaTotal / 1000).toFixed(2)} km\n- He pedalat ${(totalHores / 60 / 60).toFixed(0)} hores\n\nSi vols conèixer el teu resum, visita `)
                        generateTwitterButton()
                        umami.track('Resum generat', { 'name': username.value, 'hores' :  totalHores / 60 / 60, 'distancia' : distanciaTotal / 1000, 'viatges' : fullDictionary.length});

                        //drawCanvas(pId = 'myCanvasV', pNom = 'Luna', pHores = 0, pKm = 0, pKms = 0, pViatges = 0)
                        drawCanvas('myCanvasV', username.value, totalHores / 60 / 60, distanciaTotal / 1000, velocitatMitjana * 3.6, fullDictionary.length);
                        drawCanvas('myCanvasH', username.value, totalHores / 60 / 60, distanciaTotal / 1000, velocitatMitjana * 3.6, fullDictionary.length);
                        
                    } else {
                        alert('El fitxer no es correcte.\nProva a tornar a descarregar');
                    }
                };
                reader.readAsText(file);
            } else {
                alert('Si us plau, selecciona un fitxer HTML i introdueix el teu nom.');
            }
        });
    </script>
    <resultats>
        <section id="1">
            <h2>Comencem amb els números grans</h2>
            <h2><span id='nom_usuari'></span>, has fet un total de <span id="viatges_totals"></span> viatges aquest 2025
            </h2>
            <h3>Això són un total de <span id="hores_totals"></span> hores i <span id="minuts_totals"></span> minuts
                pedalats, o <span id="distancia_total"></span> km. Enhorabona!</h3>
            <h3>La teva velocitat mitjana va ser de <span id="velocitat_mitjana"></span> km/h. Prou bé!</h3>
        </section>
        <section id="2">
            <h2>Vas complir els teus propòsits d'any nou?</h2>
            <h2>En tot cas, la primera Girocleta que vas agafar va ser el <span id="primer_viatge"></span>. Quins
                records.</h2>
            <h3>I l'última, de moment ha sigut el <span id="ultim_viatge"></span>. Abans que acabi l'any jo crec que et
                hi ha temps a fer algun viatge més!</h3>
        </section>
        <section id="3">
            <h2>Observem amb deteniment els viatges</h2>
            <h2>El teu viatge més ràpid el vas fer <spain id="viatge_mes_llarg"></spain>. Això és una velocitat de <span
                    id="velocitat_max"></span> km/h, impressionant!</h2>
            <h3>I el més lent va ser <spain id="viatge_mes_curt"></spain>. Amb la calma, no?</h3>
        </section>
        <section id="4">
            <h2>Deixem els viatges. A la xarxa de girocleta hi ha unes 790 bicicletes</h2>
            <h2>De les quals tu n'has fet servir <span id="bicicletes_usades"></span> models diferents</h2>
            <h3>Però clarament, tu en tenies una preferida, la <span id="bicicleta_max"></span>, que vas fer servir un
                total de <span id="bicicleta_max_usos"></span> vegades. Casualitat?</h3>
        </section>
        <section id="5">
            <h2>Si tens l'abonament anual pagues <span>30</span>€ a l'any</h2>
            <h2>Cada dia de viatge està valorat en <span>2</span>€, i contant que has viatjat <span id='dies_us'></span>
                dies diferents, has viatjat un valor de <span id='valor_total'></span>€</h2>
            <h3 id='text_amortitzat'></h3>
        </section>
        <section id="6">
            <h2>Per últim, deixem endevinar una cosa, crec que sé on vius, <span id='nom_usuari_2'></span>.</h2>
            <h2>No t'espantis, és broma, però segur que vius a prop de <span id="parada_max"></span> perquè has fet
                servir aquesta estació <span id='parada_max_num'></span> vegades el 2025</h2>
            <h3>He encertat?</h3>
        </section>
        <section id="6">
            <h2>Aqui tens, resumit per <span>mes</span> els teus usos de la girocleta</h2>
            <img id='grafic_girocleta' style="border:2px solid #ebebeb; border-radius: 10px; width: 100%;" src="https://quickchart.io/chart?v=4&c=%7B%0A%20%20type%3A%20%27bar%27%2C%0A%20%20data%3A%20%7B%0A%20%20%20%20labels%3A%20%5B%27gener%27%2C%20%0A%27febrer%27%2C%0A%27mar%C3%A7%27%2C%0A%27abril%27%2C%0A%27maig%27%2C%0A%27juny%27%2C%0A%27juliol%27%2C%20%0A%27agost%27%2C%0A%27setembre%27%2C%20%0A%27octubre%27%2C%0A%27novembre%27%2C%0A%27desembre%27%5D%2C%0A%20%20%20%20datasets%3A%20%5B%7B%0A%20%20%20%20%20%20label%3A%20%27%C3%9As%20per%20mes%27%2C%0A%20%20%20%20%20%20data%3A%20%5B1%2C%202%2C%203%2C%204%2C%205%2C%206%2C%207%2C%208%2C%209%2C%2010%2C%2011%2C%2012%5D%2C%0A%20%20%20%20%20%20backgroundColor%3A%20getGradientFillHelper(%27vertical%27%2C%20%5B%27%23030201%27%2C%20%27%234da558%27%2C%20%27%23f1d600%27%5D)%2C%0A%20%20%20%20%7D%5D%0A%20%20%7D%0A%7D">
        </section>
        <script>
            function downloadImage(mId) {

                // Grab the canvas element
                let canvas = document.getElementById(mId);

                /* Create a PNG image of the pixels drawn on the canvas using the toDataURL method. PNG is the preferred format since it is supported by all browsers
                */
                var dataURL = canvas.toDataURL("image/png");

                // Create a dummy link text
                var a = document.createElement('a');
                // Set the link to the image so that when clicked, the image begins downloading
                a.href = dataURL
                // Specify the image filename
                a.download = 'girocleta-wrapped-2025.jpeg';
                // Click on the link to set off download
                a.click();
            }
        </script>
        <section id="7" style="overflow-x: scroll; width: 100%;flex-direction: column;">
            <canvas hidden id="myCanvasV" width="1080px" height="1920px"
                style="border:2px solid #ebebeb; border-radius: 10px; width: 100%;">
            </canvas>
            <img id="myCanvasVImg" src="" style="border:2px solid #ebebeb; border-radius: 10px; width: 100%;"/>
            <div style="display: flex;flex-direction: row;
            flex-wrap: nowrap;
            justify-content: space-around;
            align-items: center;
            margin: 12px;
            text-align: center;
            width: auto;">
                <button data-umami-event="Descarrega Vertical" type="button" style="width: 100%;" onclick="downloadImage('myCanvasV')">Descarrega ↓</button>
            </div>
            <canvas hidden id="myCanvasH" width="1800px" height="1080px"
                style="border:2px solid #ebebeb; border-radius: 10px; width: 100%;">
            </canvas>
            <img id="myCanvasHImg" src="" style="border:2px solid #ebebeb; border-radius: 10px; width: 100%;"/>
            <div style="display: flex;flex-direction: row;
            flex-wrap: nowrap;
            justify-content: space-around;
            align-items: center;
            margin: 12px;
            text-align: center;">

                <button data-umami-event="Descarrega Horizontal" type="button" style="width: 100%;" onclick="downloadImage('myCanvasH')">Descarrega ↓</button>
            </div>
            <a data-umami-event="Compartit a twitter" id="twitter-button" class="twitter-share-button" href="https://twitter.com/intent/tweet" target="_blank" data-size="large"
                data-via="girocletaBOT" data-hashtags="girocletaWrapped2025" data-lang="en"
                data-text="custom share text" data-dnt="true">
                Tweet
            </a>
            
        </section>
    </resultats>
    <footer>
            Fet amb ❤️ i sense IA per <a target="_blank" href="http://cataluna.cat">Luna</a> | <a href="http://twitter.com/girocletaBOT" target="_blank">@girocletaBOT</a>
            <br>
            Sense vinculació amb Transports Municipals del Gironès SAU        
    </footer>
</body>

</html>
